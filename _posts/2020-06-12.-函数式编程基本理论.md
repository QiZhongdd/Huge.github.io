---
layout: post
title: 函数式编程基本理论和特点
subtitle: 函数式编程
date: 2020-06-13
author: Qi
header-img: img/404-bg.jpg
catalog: true
tags:
  - 函数式编程
---

# 函数式编程理论

- 什么是函数

  > 函数必须总是接受一个参数，函数必须返回一个值，函数应该依据传入的参数执行，而不是依赖外部的状态，对于给定的一个 x 输出一个 y。

- 什么是函数编程

  > 函数式编程不是用函数来编程，它主要是指将复杂的函数符合成简单的函数，运算过程尽量写成一系列函数的调用

- 区分方法和函数
  > 方法是要与对象绑定的，函数时直接调用的

```
//方法
window.a=function(){

}

//函数
function a(){

}
```

# 函数式编程的特点

- 函数式一等公民
  > 所谓一等公民就是函数能像其他变量一样，将函数作为其他函数的参数，也能给变量赋值
- 不可更改状态
  > 所谓不可更改状态，就是不会改变外部的变量、环境等，最常见的就是修改全局变量。在 redux 中也是不可更改状态的，redux“修改”state 后返回的是一个新的容器对象，替换原来的。
- 没有副作用
  > 没有副作用就是指不会与外部进行交互，上面的更改状态也是一种。常见的有 I/O 交互、修改全局变量。但在真实的开发中很难做到没有副作用。重要的是管理，比如 IO 函子，在函子内部是没有副作用的，它将复作用排到函子外部执行。
- 只用表达式，不用语句

  > 所谓的语句是只像 if、else、while 等，只执行没有相应的返回值。

- 引用透明

  > 所谓的引用透明是指相同的输入总是得到相同的输出，并且输出的值只跟输入的参数有关，跟外部状态没有关系。这也是纯函数的特点

（下面的例子被称为替换模型）,调用 identity 会被直接替换为 i。在一些纯函数库中就是这么做的，webpack5 打包也会做类似的事情。这样就能够节省相关的内层，这也是函数式的编程好处之一。

```
var identity=(i)=>i

```

# 纯函数

> 所谓的纯函数就是相同的输入总会得到相同的输出，没有任何可观察的副作用。下面 slice 调用多次总是返回一样的值，slice 不会改变 xs 的状态。

```
var xs=[1,2,3]
xs.slice(0,1)
xs.slice(0,1)
xs.slice(0,1)
```

# 纯函数优缺点

> 纯函数可以降低系统的复杂度，还有很棒的特性，比如可缓存性。

```
import _ from 'lodash'
var sin=_.memorize(x=>Math.sign(x))

var a=sin(6);//第一次运行没有缓存
var b=sin(8);//第二次运行有缓存，速度较快
```

# 纯度和幂等性

> 所谓的幂等性是指函数执行多少次都得到的是相同的结果，同一参数运行一次应该与执行两次得到的结果相同，比如下面 Math.abs 不管嵌套多少层，得到的结果都一样。幂等性跟函数的纯度有关

```
Math.abs(Math.abs(-33))
```
