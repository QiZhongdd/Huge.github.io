---
layout: post
title: Array.map和Array.reduce
subtitle: 拖拽的实现
date: 2020-05-20
author: Qi
header-img: img/404-bg.jpg
catalog: true
tags:
  - js原生实现
---

# Array.prototype.map

**简述**
Array.prototype.map 方法返回一个新数组，数组中的元素为原始数组元素调用函数处理后的值。接收两个参数，

- 第一个参数 function(currentValue, index,arr)，用来处理数组的相关数据，并且返回处理后的值,currentValue 为当前处理的值，index 表示当前处理值得 index，arr 表示处理的数组。
- thisValue 可选，用来传递给函数左“this”，不传或者传 null、undefined 指向全局对象

**实现**

```
  Array.prototype.myMap = function (fun, thisValue) {
      if (typeof fun != 'function') throw new Error('错误')
      let context = thisValue ? this.value : window
      let result = []
      for (let i = 0; i < this.length; i++) {
        result.push(fun.call(context, this[i], i, this))
      }
      return result
    }
```

# Array.prototype.reduce

**简述**
Array.prototype.reduce 是 JavaScript 中比较实用的一个函数，但是很多人都没有使用过它，因为 reduce 能做的事情其实 forEach 或者 map 函数也能做。reduce 函数可以对一个数组进行遍历，然后返回一个累计值，reduce 接收两个参数：

- function(acc,item),acc 表示之前的累计值，item 表示当前的值。
- initVal 初始值，可选。

利用 reduce 实现数组去重

```
let arr = [1, 1, 1, 2, 3, 3, 4, 3, 2, 4];
arr.reduce(function(acc,item){
  if(acc.indexOf(item)===-1){
    acc.push(item);
  }
  return acc
},[])
```

**array.reduce 的实现**

```
Array.prototype.myReduce=function(fn,initValue){
   Array.prototype.myReduce = function (fn, initValue) {
      let createArr = initValue ? this : Array.prototype.slice.call(this, 1)
      acc = initValue ? initValue : this[0]
      console.log(acc)
      for (let i = 0; i < createArr.length; i++) {
        acc = fn(acc, createArr[i],i,this)
      }
      return acc
    }
}
```
