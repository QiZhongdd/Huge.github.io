---
layout: post
title: 浏览器中js的执行机制
subtitle: js是如何保存内存
date: 2020-12-09
author: Qi
header-img: img/404-bg.jpg
catalog: true
tags:
  - 浏览器
---

# js是什么类型的语言

- 静态语言：变量在使用之前就要确定其数据类型的语言程为静态语言，比如C和java输入静态语言
- 动态语言：变量在使用过程中才检查的语言成为动态语言，js。
- 弱类型语言：支持隐式类型转换的语言，比如c、js
- 强类型语言：相反不支持隐式类型的语言比如、java、C#

所以js是一种弱数据类型的动态语言，只有在执行的时候才会知道数据类型，同时意味着一个变量可以保持不同的变量

![Image text](/img/36f0f5bdce0a6d8c36cbb8a76931cff0.webp)

# js的存储方式

**js的数据类型**

js的数据类型有number、string、null、undefined、boolean、symbol、bigint、object

前面7种为原始类型，object为引用类型，区分两种是因为他们的存储方式不一样。

**存储方式**

内存空间分为栈空间、代码、堆空间,搞清楚栈空间和堆内存以下面的例子距离

- 执行的时候首先会创建全局上下文压入调用栈
- 调用foo函数的时候会将foo的上下文压入栈中
- a、b为普通的数据类型，所以值会保存在栈中
- c为引用类型，所以c的指正会保存着栈中，数据会保存在堆内存中
- 将c的指针赋值给d，所以d跟c共享一个堆内存

```

function foo(){
    var a = "极客时间"
    var b = a
    var c = {name:"极客时间"}
    var d = c
}
foo()

```

![Image text](/img/22100df5c75fb51037d7a929777c57bc.webp)

**js为什么要区分栈和堆的空间，为什么不能把数据都存到栈中**

这是因为js引擎需要用栈来维护上下文的状态，如果栈空间大了，所有数据都存放到栈中，那么就会影响到上下文的切换效率，进而影响到哼歌程序的执行效率

所以通常情况下，栈空间都不会设置太大，主要用来存放一些原始类型的小数据。而引用类型的数据占用的空间都比较大，所以这一类数据会被存放到堆中，堆空间很大，能存放很多大的数据，不过缺点是分配内存和回收内存都会占用一定的时间。






